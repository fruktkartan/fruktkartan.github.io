(function(e){function t(t){for(var n,o,l=t[0],s=t[1],c=t[2],d=0,p=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,l=1;l<r.length;l++){var s=r[l];0!==a[s]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},i=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"01be":function(e,t,r){e.exports=r.p+"img/nut-walnut.ae84d8a9.svg"},"034f":function(e,t,r){"use strict";var n=r("8a23"),a=r.n(n);a.a},"05e6":function(e,t,r){e.exports=r.p+"img/herb-chamomille.cb911753.svg"},"06b4":function(e,t,r){e.exports=r.p+"img/berry-elder.ab866b78.svg"},"09ad":function(e,t,r){e.exports=r.p+"img/berry-rowanberry.ea8ad97d.svg"},"13a8":function(e,t,r){},3084:function(e,t,r){var n={"./addnew.svg":"b122","./berry-blackberry.svg":"6457","./berry-chokeberry.svg":"d2df","./berry-currant.svg":"5d2d","./berry-elder.svg":"06b4","./berry-goji.svg":"816d","./berry-mullberry.svg":"77c4","./berry-raspberry.svg":"6358","./berry-rosehip.svg":"fd95","./berry-rowanberry.svg":"09ad","./berry-seabuckthorn.svg":"5d08","./berry-sloeberry.svg":"64cb","./berry-wildstrawberry.svg":"6621","./berry.svg":"a279","./herb-chamomille.svg":"05e6","./herb-chervil.svg":"d8b3","./herb-nettle.svg":"fd34","./herb-wildgarlic.svg":"fdc1","./herb.svg":"48d5","./nut-hazelnut.svg":"fcff","./nut-sweetchestnut.svg":"bff9","./nut-walnut.svg":"01be","./nut.svg":"c63c","./tree-apple.svg":"356f","./tree-cherry.svg":"f40c","./tree-pear.svg":"335d","./tree-plum.svg":"d5ee","./tree-quince.svg":"76be","./tree-rhubarb.svg":"a735","./tree.svg":"4cda"};function a(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=i,e.exports=a,a.id="3084"},"335d":function(e,t,r){e.exports=r.p+"img/tree-pear.f5496183.svg"},"356f":function(e,t,r){e.exports=r.p+"img/tree-apple.eefadb99.svg"},"48d5":function(e,t,r){e.exports=r.p+"img/herb.cb0849a0.svg"},"4cda":function(e,t,r){e.exports=r.p+"img/tree.1d52e750.svg"},5490:function(e,t,r){"use strict";var n=r("13a8"),a=r.n(n);a.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("6d93");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"app"}},[r("v-navigation-drawer",{attrs:{"mobile-breakpoint":960,width:340,"mini-variant":e.miniVariant,right:"",bottom:"",absolute:""},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-list",{staticClass:"d-none d-lg-block"},[r("v-list-item",{on:{click:function(t){e.miniVariant=!e.miniVariant}}},[r("v-list-item-icon",[e.miniVariant?e._e():r("v-icon",[e._v(e._s(e.mdiClose))]),e.miniVariant?r("v-icon",{attrs:{title:"Visa panelen"}},[e._v(e._s(e.mdiMenuOpen))]):e._e()],1),r("v-list-item-content",[e._v("Dölj panelen")])],1)],1)]},proxy:!0}]),model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[r("v-card",{attrs:{flat:""}},[r("h1",[r("v-card-title",{staticClass:"hidden-lg-and-up"},[r("v-img",{attrs:{src:"fruktkartan_m.png",srcset:"fruktkartan_m.png 1x,fruktkartan_m2.png 2x,fruktkartan_m3.png 3x","max-width":280}})],1),r("v-card-title",{staticClass:"hidden-md-and-down"},[e.miniVariant?r("v-img",{attrs:{alt:"Fruktkartan",src:"f_t.png"}}):r("v-img",{attrs:{alt:"Fruktkartan",src:"fruktkartan_a.png"}},[r("span",{staticClass:"beta",style:{display:e.betaDisplay}},[e._v("beta")])])],1)],1)]),r("v-list",[r("SidebarItem",{attrs:{"icon-img":e.selectedTreeIcon,tooltip:"Visar "+e.selectedTreeName.toLowerCase()},on:{miniAction:function(t){e.miniVariant=!1}}},[r("v-select",{attrs:{items:e.selectTreeTypes,label:"Välj träd att visa"},model:{value:e.filters.type,callback:function(t){e.$set(e.filters,"type",t)},expression:"filters.type"}})],1),r("SidebarItem",{attrs:{icon:e.mdiPlus},on:{onClick:function(t){return e.$refs.map.addNewTree()}}},[e._v(" Lägg till träd ")]),r("SidebarItem",{attrs:{icon:e.mdiInformation},on:{onClick:function(t){e.showFAQ=!0}}},[e._v(" Om Fruktkartan ")])],1)],1),r("v-main",[r("Map",{ref:"map",staticClass:"fill-height",attrs:{"tree-filters":e.filters},on:{openDrawer:function(t){e.drawer=!0},closeDrawer:function(t){e.drawer=null}}}),r("About",{model:{value:e.showFAQ,callback:function(t){e.showFAQ=t},expression:"showFAQ"}})],1)],1)},i=[],o=(r("4de4"),r("5530")),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{loading:e.loading}},[r("v-snackbar",{staticStyle:{"z-index":"4"},attrs:{timeout:-1},model:{value:e.addTreeMarker.visible,callback:function(t){e.$set(e.addTreeMarker,"visible",t)},expression:"addTreeMarker.visible"}},[e._v(" Dra markören till rätt plats. "),r("v-btn",{attrs:{text:"",color:"green"},on:{click:function(t){t.stopPropagation(),e.addTree=!0}}},[e._v("Fortsätt")]),r("v-btn",{attrs:{text:""},on:{click:function(t){e.addTreeMarker.visible=!1}}},[e._v("Avbryt")])],1),r("l-map",{ref:"theMap",staticStyle:{"z-index":"0"},attrs:{center:e.center,zoom:e.zoom,options:e.mapOptions},on:{"update:bounds":e.fetchMarkers}},[r("l-control",{staticClass:"hidden-md-and-up control",staticStyle:{"z-index":"1"},attrs:{position:"bottomleft"}},[r("v-icon",{attrs:{alt:"Meny",title:"Meny"},on:{click:function(t){return t.stopPropagation(),e.$emit("openDrawer")}}},[e._v(" "+e._s(e.mdiMenu)+" ")]),r("span",{staticStyle:{"padding-left":"1em"},on:{click:function(t){return t.stopPropagation(),e.$emit("openDrawer")}}},[e._v(" Meny ")])],1),r("l-tile-layer",{attrs:{url:e.url,options:e.layerOptions,attribution:e.attribution,"z-index":0}}),e.canGeoLocate?r("l-control",{staticClass:"control",attrs:{position:"topleft"}},[r("v-icon",{on:{click:function(t){return t.stopPropagation(),e.retrieveUserPosition(t)}}},[e._v(" "+e._s(e.mdiCrosshairsGps)+" ")])],1):e._e(),r("l-marker-cluster",{attrs:{options:e.clusterOptions}},e._l(e.filteredMarkers,(function(t){return r("l-marker",{key:t.key,attrs:{"lat-lng":t,icon:t.icon},on:{click:function(r){e.viewTree=t.key}}})})),1),r("l-marker",{key:"addTreeMarker",attrs:{visible:e.addTreeMarker.visible,"lat-lng":e.addTreeMarker.latLng,icon:e.addTreeMarker.icon,"z-index-offset":999,draggable:""},on:{"update:latLng":function(t){return e.$set(e.addTreeMarker,"latLng",t)},"update:lat-lng":function(t){return e.$set(e.addTreeMarker,"latLng",t)},mouseup:e.addTreeIconMouseUp}}),r("ViewTreeDialog",{on:{change:e.fetchMarkers},model:{value:e.viewTree,callback:function(t){e.viewTree=t},expression:"viewTree"}}),r("AddTreeDialog",{attrs:{"lat-lng":e.addTreeMarker.latLng},on:{abort:function(t){e.addTreeMarker.visible=!1},added:function(t){e.addTreeMarker.visible=!1,e.fetchMarkers()}},model:{value:e.addTree,callback:function(t){e.addTree=t},expression:"addTree"}})],1)],1)},s=[],c=(r("99af"),r("d81d"),r("13d5"),r("4fad"),r("d3b7"),r("2ca0"),r("3835")),u=r("e11e"),d=r("2699"),p=r("a40a"),v=r("4e2b"),f=r("2253"),b=r("ca9f"),m=r.n(b),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{"max-width":"500",persistent:""},model:{value:e.displayDialog,callback:function(t){e.displayDialog=t},expression:"displayDialog"}},["edit"===e.step?r("TreeEditor",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Lägg till träd")]},proxy:!0},{key:"buttons",fn:function(){return[r("v-btn",{on:{click:function(t){return e.$emit("input",!1)}}},[e._v("Tillbaka")]),r("v-btn",{attrs:{color:"green",disabled:!e.tree.valid},on:{click:function(t){e.step="preview"}}},[e._v("Fortsätt")]),r("v-spacer"),r("v-btn",{on:{click:function(t){e.$emit("input",!1),e.$emit("abort")}}},[e._v("Avbryt")])]},proxy:!0}],null,!1,769298389),model:{value:e.tree,callback:function(t){e.tree=t},expression:"tree"}}):e._e(),"preview"===e.step?r("TreeViewer",{attrs:{tree:e.tree,preview:!0},scopedSlots:e._u([{key:"buttons",fn:function(){return[r("v-btn",{on:{click:function(t){e.step="edit"}}},[e._v("Tillbaka")]),r("v-btn",{attrs:{color:"green"},on:{click:e.addTree}},[e._v("Publicera")]),r("v-spacer"),r("v-btn",{on:{click:function(t){e.step="edit",e.$emit("input",!1),e.$emit("abort")}}},[e._v("Avbryt")])]},proxy:!0}],null,!1,1044071900)}):e._e()],1)},h=[],y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[e._t("title")],2),r("v-card-text",[r("v-form",{model:{value:e.tree.valid,callback:function(t){e.$set(e.tree,"valid",t)},expression:"tree.valid"}},[r("v-select",{attrs:{required:"",rules:[function(e){return!!e||"Du måste ange en trädsort"}],items:e.insertableTrees,label:"Trädsort"},model:{value:e.tree.type,callback:function(t){e.$set(e.tree,"type",t)},expression:"tree.type"}}),r("p",[e.file?r("v-img",{attrs:{src:e.previewSource,height:"194",alt:"Ny bild"}}):r("TreeImage",{attrs:{image:e.tree.file,alt:"Nuvarande bild"}})],1),r("v-file-input",{attrs:{accept:"image/*",label:"Ladda upp en bild"},on:{change:e.fileChanged},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}),r("v-progress-linear",{attrs:{active:e.uploading,value:e.uploadingProgress,striped:!0}}),e.file?r("p",[e._v(" Bildens rotation kan vara fel här, men bör bli rätt i nästa steg. ")]):e._e(),r("v-textarea",{attrs:{rules:[function(e){return!!e||"Beskriv trädet innan du fortsätter"}],required:"",label:"Beskrivning"},model:{value:e.tree.desc,callback:function(t){e.$set(e.tree,"desc",t)},expression:"tree.desc"}})],1)],1),r("v-card-actions",[e._t("buttons")],2)],1)},k=[],x=(r("b0c0"),r("3ca3"),r("ddb0"),r("2b3d"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.image?r("v-img",{attrs:{src:e.img,srcset:e.img_srcset,alt:e.alt,width:e.width},on:{error:function(t){e.image=!1,e.err=!0}}}):e._e(),e.err?r("div",{staticClass:"warning"},[e._v(" < Bilden kunde inte visas just nu. Det kan bero på att den nyss laddats upp, och fortfarande bearbetas. > ")]):e._e()],1)}),_=[],w=(r("a15b"),"https://fruktkartan-thumbs.s3.eu-north-1.amazonaws.com"),T=400,O={name:"TreeImage",props:{image:{type:String,default:null},alt:{type:String,default:""}},data:function(){return{err:!1,width:T}},computed:{img:function(){return"".concat(w,"/").concat(this.image,"_").concat(T,".jpg")},img_srcset:function(){var e=this;return[1,1.5,2,3].map((function(t){return"".concat(w,"/").concat(e.image,"_").concat(T*t,".jpg ").concat(t,"x")})).join(",")}}},V=O,j=r("2877"),M=r("6544"),S=r.n(M),C=r("adda"),L=Object(j["a"])(V,x,_,!1,null,null,null),D=L.exports;S()(L,{VImg:C["a"]});var $={name:"TreeEditor",components:{TreeImage:D},model:{prop:"tree"},props:{tree:{type:Object,default:function(){return{valid:!1,file:null}}}},data:function(){return{insertableTrees:r("f40e"),file:null,uploading:!1,uploadingProgress:0,uploadOk:null}},computed:{previewSource:function(){return URL.createObjectURL(this.file)}},methods:{fileChanged:function(){var e=this;this.file?(this.uploading=!0,fetch("".concat("https://fruktkartan-api.herokuapp.com","/sign"),{method:"POST",body:JSON.stringify({"file-name":this.file.name}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){var r=new File([e.file],t.filename,{type:e.file.type}),n=new XMLHttpRequest;n.open("PUT",t.signedRequest),n.upload.addEventListener("progress",(function(t){e.uploadingProgress=t.loaded/t.total*100})),n.onreadystatechange=function(){4===n.readyState&&(e.uploading=!1,e.uploadingProgress=0,200===n.status?e.uploadOk=!0:(e.uploadOk=!1,console.log("Error uploading:",n.status)))},n.send(r),e.tree.file=t.filename})).catch((function(t){console.log("Error getting upload signature",t),e.uploading=!1,e.uploadingProgress=0,e.uploadOk=!1}))):this.tree.file=null}}},I=$,P=r("b0af"),A=r("99d9"),E=r("23a7"),B=r("4bd4"),F=r("8e36"),N=r("b974"),z=r("a844"),R=Object(j["a"])(I,y,k,!1,null,null,null),U=R.exports;S()(R,{VCard:P["a"],VCardActions:A["a"],VCardText:A["b"],VCardTitle:A["c"],VFileInput:E["a"],VForm:B["a"],VImg:C["a"],VProgressLinear:F["a"],VSelect:N["a"],VTextarea:z["a"]});var H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{loading:e.loading}},[e.preview?r("v-card-text",[r("div",{staticClass:"pt-4"},[e._v(" FÖRHANDSGRANSKNING ")]),r("div",[r("small",[r("em",[e._v(" Ditt bidrag licenseras med "),r("a",{attrs:{href:"https://opendatacommons.org/licenses/odbl/summary/",target:"_blank"}},[e._v("Open Database License")]),e._v(", bilder med "),r("a",{attrs:{href:"https://creativecommons.org/publicdomain/zero/1.0/deed.sv",target:"_blank"}},[e._v("CC0")]),e._v(". ")])])])]):e._e(),r("v-card-title",[e._v(e._s(e.tree.type)+" ")]),r("v-card-text",[r("p",[r("em",[e._v("Uppdaterat den "+e._s(e.prettyDate(e.date)))])]),r("p",[e._v(e._s(e.tree.desc))]),r("TreeImage",{attrs:{image:e.tree.file,alt:"Bild av trädet"}})],1),r("v-card-actions",[e._t("buttons")],2)],1)},q=[],K=r("5a0c"),G=r.n(K);r("a7bb");G.a.locale("sv");var J={name:"TreeViewer",components:{TreeImage:D},model:{prop:["loading","preview","tree"]},props:{loading:{type:Boolean},preview:{type:Boolean,default:!1},tree:{type:Object,default:function(){}}},computed:{date:function(){return this.preview?new Date:this.tree.added}},methods:{prettyDate:function(e){if(!e)return"";var t=G()(e);return"".concat(t.format("D MMMM YYYY")," kl. ").concat(t.format("H.mm"))}}},W=J,Q=Object(j["a"])(W,H,q,!1,null,null,null),Y=Q.exports;S()(Q,{VCard:P["a"],VCardActions:A["a"],VCardText:A["b"],VCardTitle:A["c"]});var Z={name:"AddTreeDialog",components:{TreeEditor:U,TreeViewer:Y},props:{value:{type:Boolean},latLng:{type:Object,default:function(){return{lat:null,lng:null}}}},data:function(){return{step:"edit",tree:{}}},computed:{displayDialog:function(){return!!this.value}},methods:{addTree:function(){var e=this,t=Object(o["a"])(Object(o["a"])({},this.tree),{},{lat:this.latLng.lat,lon:this.latLng.lng});fetch("".concat("https://fruktkartan-api.herokuapp.com","/tree"),{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(){e.step="edit",e.tree={},e.$emit("input",!1),e.$emit("added")}))}}},X=Z,ee=r("8336"),te=r("169a"),re=r("2fa4"),ne=Object(j["a"])(X,g,h,!1,null,null,null),ae=ne.exports;S()(ne,{VBtn:ee["a"],VDialog:te["a"],VSpacer:re["a"]});var ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{"max-width":"440",persistent:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.close(t)}},model:{value:e.displayDialog,callback:function(t){e.displayDialog=t},expression:"displayDialog"}},["view"===e.step?r("TreeViewer",{attrs:{loading:!Object.entries(e.tree).length,tree:e.tree},scopedSlots:e._u([{key:"buttons",fn:function(){return[r("v-btn",{on:{click:e.close}},[e._v("Stäng")]),r("v-spacer"),r("v-btn",{on:{click:function(t){e.step="edit",e.newTree=Object.assign({},e.tree)}}},[e._v("Redigera")])]},proxy:!0}],null,!1,4220328202)}):e._e(),"edit"===e.step?r("TreeEditor",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Redigera träd")]},proxy:!0},{key:"buttons",fn:function(){return[r("v-btn",{on:{click:function(t){e.step="view"}}},[e._v("Tillbaka")]),r("v-btn",{attrs:{color:"green",disabled:!e.newTree.valid||e.treesAreEqual(e.newTree,e.tree)},on:{click:function(t){e.step="preview"}}},[e._v(" Fortsätt ")]),r("v-spacer"),r("v-btn",{staticClass:"px-2",attrs:{small:"",color:"red lighten-3"},on:{click:e.deleteTree}},[e._v(" Ta bort ")])]},proxy:!0}],null,!1,3381997158),model:{value:e.newTree,callback:function(t){e.newTree=t},expression:"newTree"}}):e._e(),"preview"===e.step?r("TreeViewer",{attrs:{tree:e.newTree,preview:!0},scopedSlots:e._u([{key:"buttons",fn:function(){return[r("v-btn",{on:{click:function(t){e.step="edit"}}},[e._v("Tillbaka")]),r("v-btn",{attrs:{color:"green"},on:{click:e.submitTree}},[e._v("Uppdatera trädet")]),r("v-spacer"),r("v-btn",{on:{click:e.close}},[e._v("Avbryt")])]},proxy:!0}],null,!1,587977950)}):e._e()],1)},oe=[],le={name:"ViewTreeDialog",components:{TreeViewer:Y,TreeEditor:U},props:{value:{type:String,default:null}},data:function(){return{step:"view",treeCache:{},tree:{},newTree:{}}},computed:{displayDialog:function(){return!!this.value}},watch:{value:function(e){if(e){var t=this,r=new Promise((function(r){t.treeCache[e]?r(t.treeCache[e]):fetch("".concat("https://fruktkartan-api.herokuapp.com","/tree/").concat(e)).then((function(e){return e.json()})).then(r)}));r.then((function(r){t.tree=r,t.treeCache[e]=t.tree}))}else this.tree={}}},methods:{close:function(){this.step="view",this.$emit("input",null)},deleteTree:function(){var e=this,t=this.value,r=window.confirm("Är du säker på att du vill ta bort det här trädet"+" (".concat(this.tree.type,") från Fruktkartan?"));r&&fetch("".concat("https://fruktkartan-api.herokuapp.com","/tree/").concat(t),{method:"DELETE"}).then((function(){delete e.treeCache[t],e.step="view",e.$emit("input",null),e.$emit("change")})).catch((function(e){console.log("Ett fel uppstod när trädet skulle raderas: ",e)}))},submitTree:function(){var e=this,t=this.value;fetch("".concat("https://fruktkartan-api.herokuapp.com","/tree/").concat(this.value),{method:"POST",body:JSON.stringify(this.newTree),headers:{"Content-Type":"application/json"}}).then((function(){delete e.treeCache[t],e.step="view",e.$emit("input",null),e.$emit("change")})).catch((function(e){console.log("Ett fel uppstod när trädet skulle uppdateras: ",e)}))},treesAreEqual:function(e,t){return e.type===t.type&&e.desc===t.desc&&e.file===t.file}}},se=le,ce=Object(j["a"])(se,ie,oe,!1,null,null,null),ue=ce.exports;S()(ce,{VBtn:ee["a"],VDialog:te["a"],VSpacer:re["a"]});var de=r("94ed"),pe=750,ve=Object(u["latLng"])(62.3908,17.3069),fe=function(e){if(!e.ok)throw Error(e.statusText);return e},be={name:"Map",components:{LMap:d["a"],LTileLayer:p["a"],LMarker:v["a"],LControl:f["a"],LMarkerCluster:m.a,AddTreeDialog:ae,ViewTreeDialog:ue},props:{treeFilters:{type:Object,default:function(){return{type:"*"}}}},data:function(){return{loading:!0,center:ve,zoom:5,url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:"kartgrafik <a href='https://carto.com/attributions' target='_blank'>CARTO</a> · kartdata <a href='https://www.openstreetmap.org/copyright' target='_blank'>Open Street Map</a>",layerOptions:{maxZoom:19,subdomains:"abcd"},mapOptions:{minZoom:3,zoomSnap:.5,noWrap:!0,maxBounds:Object(u["latLngBounds"])(Object(u["latLng"])(-90,-180),Object(u["latLng"])(90,180))},clusterOptions:{disableClusteringAtZoom:14,spiderfyOnMaxZoom:!1},markers:[],icons:{},mdiMenu:de["e"],mdiCrosshairsGps:de["b"],canGeoLocate:!0,addTreeMarker:{latLng:ve,visible:!1},addTree:!1,viewTree:null}},computed:{filteredMarkers:function(){var e=this,t=this.markers;return"*"!==this.treeFilters.type&&(t=t.filter((function(t){return t.group.startsWith(e.treeFilters.type)}))),t}},created:function(){function e(e){return Object(u["icon"])({iconSize:[42,36],iconAnchor:[21,34],iconUrl:r("3084")("./".concat(e,".svg")),shadowUrl:"addnew"===e?r("b122"):null,shadowSize:[0,0]})}this.icons=Object.entries(r("a43d")).map((function(t){var r=Object(c["a"])(t,2),n=r[0],a=r[1];return[n,e(a.icon)]})).reduce((function(e,t){var r=Object(c["a"])(t,2),n=r[0],a=r[1];return e[n]=a,e}),{}),this.canGeoLocate=navigator.geolocation},mounted:function(){this.$refs.theMap.mapObject.attributionControl.setPrefix(""),this.retrieveUserPosition()},methods:{retrieveUserPosition:function(){var e=this,t=this.$refs.theMap.mapObject,r=new Promise((function(t,r){e.canGeoLocate?navigator.geolocation.getCurrentPosition(t,r):r()}));r.then((function(e){var r=Object(u["latLng"])(e.coords.latitude,e.coords.longitude),n=r.toBounds(e.coords.accuracy?Math.max(e.coords.accuracy,pe):pe),a=t.getBounds(),i=a.getEast()-a.getWest(),o=n.getEast()-n.getWest();o<i?t.fitBounds(n):t.panTo(r)})).catch((function(t){t.code==t.PERMISSION_DENIED&&(e.canGeoLocate=!1),e.fetchMarkers()}))},addNewTree:function(){var e=this.$refs.theMap.mapObject;this.$emit("closeDrawer"),this.addTreeMarker={visible:!0,latLng:e.getCenter(),icon:this.icons.addnew}},addTreeIconMouseUp:function(e){e.latlng==this.addTreeMarker.latLng&&(this.addTree=!0)},fetchMarkers:function(){var e=this;this.loading=!0;var t=this,r=this.$refs.theMap.mapObject.getBounds();fetch("".concat("https://fruktkartan-api.herokuapp.com","/trees?bbox=").concat(r._southWest.lat,",").concat(r._southWest.lng,",").concat(r._northEast.lat,",").concat(r._northEast.lng)).then(fe).then((function(e){return e.json()})).then((function(e){t.markers=e.map((function(e){var r;return Object(o["a"])(Object(o["a"])({},e),{},{icon:null!==(r=t.icons[e.group])&&void 0!==r?r:t.icons.tree})}))})).catch((function(e){console.log("Error fetching trees: ",e)})).finally((function(){e.loading=!1}))}}},me=be,ge=(r("5490"),r("132d")),he=r("2db4"),ye=Object(j["a"])(me,l,s,!1,null,null,null),ke=ye.exports;S()(ye,{VBtn:ee["a"],VCard:P["a"],VIcon:ge["a"],VSnackbar:he["a"]});var xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{"max-width":"500"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.close(t)}},model:{value:e.displayDialog,callback:function(t){e.displayDialog=t},expression:"displayDialog"}},[r("v-card",[r("v-card-title",[e._v(" Om Fruktkartan ")]),r("v-card-text",[r("p",[e._v(" Fruktkartan är en öppen databas med fruktträd på allmänningar och i parker. Vem som helst kan lägga till nya träd, och redigera eller ta bort sådana som inte passar här. Sajten är byggd av Leo Wallentin, Matti Ryhänen och Daniel Lublin. ")]),r("p",[e._v(" Andra sajter och appar kan använda information härifrån, via ett öppet API. Informationen är licenserad med "),r("a",{attrs:{href:"https://opendatacommons.org/licenses/odbl/summary/",target:"_blank"}},[e._v("Open Database License")]),e._v(", bilder med "),r("a",{attrs:{href:"https://creativecommons.org/publicdomain/zero/1.0/deed.sv",target:"_blank"}},[e._v("CC0")]),e._v(". ")]),r("p",[e._v(" Fruktkartan är byggd med Vue/Vuetify samt Leaflet med Open Street Maps kartor. Källkoden är fri, "),r("em",[e._v("copyleft")]),e._v(" och licenserad med "),r("a",{attrs:{href:"https://www.gnu.org/licenses/agpl-3.0.html",target:"_blank"}},[e._v(" AGPLv3")]),e._v(". ")]),r("p",[e._v(" Frågor? Skicka ett "),r("a",{attrs:{href:"mailto:mejl@leowallentin.se"}},[e._v("mejl")]),e._v("! ")]),r("small",[e._v("Byggd "+e._s(e.timestamp)+" från "),r("a",{attrs:{href:"https://github.com/fruktkartan/fruktkartan/commit/"+e.githash,target:"_blank"}},[e._v(e._s(e.githash))]),e._v(" .")])]),r("v-card-actions",[r("v-btn",{on:{click:function(t){return t.stopPropagation(),e.close(t)}}},[e._v("Stäng")])],1)],1)],1)},_e=[],we={name:"About",props:{value:{type:Boolean,default:!1}},data:function(){var e,t;return{timestamp:null!==(e="2020-06-20 16:04:28 UTC")&&void 0!==e?e:"?",githash:null!==(t="c88b390")&&void 0!==t?t:"?"}},computed:{displayDialog:{get:function(){return!!this.value},set:function(e){this.$emit("input",e)}}},methods:{close:function(){this.$emit("input",!1)}}},Te=we,Oe=Object(j["a"])(Te,xe,_e,!1,null,null,null),Ve=Oe.exports;S()(Oe,{VBtn:ee["a"],VCard:P["a"],VCardActions:A["a"],VCardText:A["b"],VCardTitle:A["c"],VDialog:te["a"]});var je=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-list-item",{on:{click:function(t){return e.$emit("onClick")}}},[r("v-list-item-icon",{on:{click:function(t){return e.$emit("miniAction")}}},[r("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[e.iconImg?r("v-img",e._g({attrs:{src:e.iconImg,"max-width":"32"}},n)):r("v-icon",e._g({attrs:{color:e.active?"blue":"gray"}},n),[e._v(e._s(e.icon))])]}}])},[r("span",[e._v(e._s(e.tooltip||e.$slots.default[0].text))])])],1),r("v-list-item-content",[e._t("default")],2)],1)},Me=[],Se={name:"SidebarItem",props:{text:{type:String,default:""},tooltip:{type:String,default:""},icon:{type:String,default:""},iconImg:{type:String,default:""},active:{type:Boolean,default:!1}}},Ce=Se,Le=r("da13"),De=r("5d23"),$e=r("34c3"),Ie=r("3a2f"),Pe=Object(j["a"])(Ce,je,Me,!1,null,null,null),Ae=Pe.exports;S()(Pe,{VIcon:ge["a"],VImg:C["a"],VListItem:Le["a"],VListItemContent:De["a"],VListItemIcon:$e["a"],VTooltip:Ie["a"]});var Ee={type:"*"},Be={name:"App",components:{Map:ke,About:Ve,SidebarItem:Ae},data:function(){return{showFAQ:!1,drawer:null,miniVariant:!1,betaDisplay:"none",selectTreeTypes:r("d549"),filters:Object(o["a"])({},Ee),mdiClose:de["a"],mdiMenuOpen:de["f"],mdiFilter:de["c"],mdiReload:de["h"],mdiInformation:de["d"],mdiPlus:de["g"]}},computed:{selectedTreeIcon:function(){var e="*"===this.filters.type?"tree":this.filters.type;return r("3084")("./".concat(e,".svg"))},selectedTreeName:function(){var e=this.filters.type;return"*"===e?"alla träd":this.selectTreeTypes.filter((function(t){return t.value===e}))[0].text}},created:function(){"fruktkartan.se"!=window.location.hostname&&(this.betaDisplay="block")},methods:{reset:function(){this.filters=Object(o["a"])({},Ee)}}},Fe=Be,Ne=(r("034f"),r("7496")),ze=r("8860"),Re=r("f6c4"),Ue=r("f774"),He=Object(j["a"])(Fe,a,i,!1,null,null,null),qe=He.exports;S()(He,{VApp:Ne["a"],VCard:P["a"],VCardTitle:A["c"],VIcon:ge["a"],VImg:C["a"],VList:ze["a"],VListItem:Le["a"],VListItemContent:De["a"],VListItemIcon:$e["a"],VMain:Re["a"],VNavigationDrawer:Ue["a"],VSelect:N["a"]});var Ke=r("f309");n["a"].use(Ke["a"]);var Ge=new Ke["a"]({icons:{iconfont:"mdiSvg"},theme:{options:{variations:!1}}});n["a"].config.productionTip=!1,new n["a"]({vuetify:Ge,render:function(e){return e(qe)}}).$mount("#app")},"5d08":function(e,t,r){e.exports=r.p+"img/berry-seabuckthorn.b3b37343.svg"},"5d2d":function(e,t,r){e.exports=r.p+"img/berry-currant.fc1320db.svg"},6358:function(e,t,r){e.exports=r.p+"img/berry-raspberry.db4b7825.svg"},6457:function(e,t,r){e.exports=r.p+"img/berry-blackberry.fccd1fe6.svg"},"64cb":function(e,t,r){e.exports=r.p+"img/berry-sloeberry.3cfaf7a1.svg"},6621:function(e,t,r){e.exports=r.p+"img/berry-wildstrawberry.5dbb4cca.svg"},"76be":function(e,t,r){e.exports=r.p+"img/tree-quince.d787c172.svg"},"77c4":function(e,t,r){e.exports=r.p+"img/berry-mullberry.43bcd64d.svg"},"816d":function(e,t,r){e.exports=r.p+"img/berry-goji.c690a79f.svg"},"8a23":function(e,t,r){},a279:function(e,t,r){e.exports=r.p+"img/berry.072e9012.svg"},a43d:function(e){e.exports=JSON.parse('{"berry":{"icon":"berry"},"berry-blackberry":{"icon":"berry-blackberry"},"berry-chokeberry":{"icon":"berry-chokeberry"},"berry-currant":{"icon":"berry-currant"},"berry-elder":{"icon":"berry-elder"},"berry-goji":{"icon":"berry-goji"},"berry-mullberry":{"icon":"berry-mullberry"},"berry-raspberry":{"icon":"berry-raspberry"},"berry-rosehip":{"icon":"berry-rosehip"},"berry-rowanberry":{"icon":"berry-rowanberry"},"berry-seabuckthorn":{"icon":"berry-seabuckthorn"},"tree-sloeberry":{"icon":"berry-sloeberry"},"berry-wildstrawberry":{"icon":"berry-wildstrawberry"},"nut":{"icon":"nut"},"nut-hazelnut":{"icon":"nut-hazelnut"},"nut-sweetchestnut":{"icon":"nut-sweetchestnut"},"nut-walnut":{"icon":"nut-walnut"},"tree-apple":{"icon":"tree-apple"},"tree-cherry":{"icon":"tree-cherry"},"tree-pear":{"icon":"tree-pear"},"tree-plum":{"icon":"tree-plum"},"tree-quince":{"icon":"tree-quince"},"tree-rhubarb":{"icon":"tree-rhubarb"},"herb":{"icon":"herb"},"herb-chamomille":{"icon":"herb-chamomille"},"herb-chervil":{"icon":"herb-chervil"},"herb-nettle":{"icon":"herb-nettle"},"herb-wildgarlic":{"icon":"herb-wildgarlic"},"tree":{"icon":"tree"},"addnew":{"icon":"addnew"}}')},a735:function(e,t,r){e.exports=r.p+"img/tree-rhubarb.8f0bf4b6.svg"},b122:function(e,t,r){e.exports=r.p+"img/addnew.308bbd8b.svg"},bff9:function(e,t,r){e.exports=r.p+"img/nut-sweetchestnut.157c39f7.svg"},c63c:function(e,t,r){e.exports=r.p+"img/nut.7bfbac5c.svg"},d2df:function(e,t,r){e.exports=r.p+"img/berry-chokeberry.1d074995.svg"},d549:function(e){e.exports=JSON.parse('[{"text":"Alla","value":"*"},{"text":"Äppelträd","value":"tree-apple"},{"text":"Körsbärsträd","value":"tree-cherry"},{"text":"Plommonträd","value":"tree-plum"},{"text":"Päronträd","value":"tree-pear"},{"text":"Kvitten","value":"tree-quince"},{"text":"Rabarber","value":"tree-rhubarb"},{"text":"Slånbär och krikon","value":"tree-sloeberry"},{"divider":true},{"header":"Nötter"},{"text":"Alla nötträd","value":"nut"},{"text":"Hasselnötsträd","value":"nut-hazelnut"},{"text":"Valnötsträd","value":"nut-walnut"},{"text":"Äkta kastanjeträd","value":"nut-sweetchestnut"},{"divider":true},{"header":"Örter"},{"text":"Alla örter","value":"herb"},{"text":"Kamomill","value":"herb-chamomille"},{"text":"Körvel","value":"herb-chervil"},{"text":"Ramslök","value":"herb-wildgarlic"},{"divider":true},{"header":"Bär"},{"text":"Alla bärställen","value":"berry"},{"text":"Aronia","value":"berry-chokeberry"},{"text":"Björnbär","value":"berry-blackberry"},{"text":"Bocktörne (gojibär)","value":"berry-goji"},{"text":"Fläder","value":"berry-elder"},{"text":"Hallon","value":"berry-raspberry"},{"text":"Havtorn","value":"berry-seabuckthorn"},{"text":"Mullbär","value":"berry-mullberry"},{"text":"Smultron","value":"berry-wildstrawberry"},{"text":"Vinbär","value":"berry-currant"}]')},d5ee:function(e,t,r){e.exports=r.p+"img/tree-plum.7924e886.svg"},d8b3:function(e,t,r){e.exports=r.p+"img/herb-chervil.78ea0e69.svg"},f40c:function(e,t,r){e.exports=r.p+"img/tree-cherry.d5d963a3.svg"},f40e:function(e){e.exports=JSON.parse('[{"text":"Körsbärsträd","value":"Körsbär"},{"text":"Plommonträd","value":"Plommon"},{"text":"Päronträd","value":"Päron"},{"text":"Äppelträd","value":"Äpple"},{"text":"Slånbär","value":"Slånbär"},{"divider":true},{"text":"Valnöt","value":"Valnöt"},{"text":"Hasselnöt","value":"Hasselnöt"},{"text":"Äkta kastanj","value":"Kastanj"},{"text":"Mandel","value":"Mandel"},{"divider":true},{"text":"Aronia","value":"Aronia"},{"text":"Berberisbär","value":"Berberisbär"},{"text":"Björnbär","value":"Björnbär"},{"text":"Blåhallon (salmbär)","value":"Blåhallon"},{"text":"Bocktörne (gojibär)","value":"Bocktörne"},{"text":"Fläderbuske","value":"Fläder"},{"text":"Hallon","value":"Hallon"},{"text":"Havtorn","value":"Havtorn"},{"text":"Kvitten","value":"Kvitten"},{"text":"Mullbär","value":"Mullbär"},{"text":"Nypon","value":"Nypon"},{"text":"Rosenkvitten","value":"Rosenkvitten"},{"text":"Röda vinbär","value":"Röda vinbär"},{"text":"Svarta vinbär","value":"Svarta vinbär"}]')},fcff:function(e,t,r){e.exports=r.p+"img/nut-hazelnut.5770984e.svg"},fd34:function(e,t,r){e.exports=r.p+"img/herb-nettle.ac9af386.svg"},fd95:function(e,t,r){e.exports=r.p+"img/berry-rosehip.54a5937a.svg"},fdc1:function(e,t,r){e.exports=r.p+"img/herb-wildgarlic.42a5e191.svg"}});
//# sourceMappingURL=app.96bc1324.js.map